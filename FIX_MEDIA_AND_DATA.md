# Исправление отображения фотографий и заполнение базы данных

## Что сделано:

### 1. Исправлено обслуживание медиа-файлов:
- Обновлен `urls.py` - медиа-файлы теперь обслуживаются и в production
- Поля `logo` и `image` сделаны необязательными (blank=True, null=True)

### 2. Создан скрипт заполнения базы данных:
- Создан management command `fill_database.py`
- Автоматически создает:
  - 4 марки (Mercedes-Benz, BMW, Toyota, Audi)
  - 9 моделей
  - 9 автомобилей

### 3. Обновлен Dockerfile:
- Автоматически выполняет `fill_database` при запуске

## Что нужно сделать:

### 1. Создать миграцию для изменений в моделях:

```bash
cd shop_project
python manage.py makemigrations
```

Это создаст миграцию для полей `logo` и `image` (теперь они необязательные).

### 2. Закоммитьте все изменения:

```bash
git add .
git commit -m "Fix media files serving and add database filling script"
git push
```

### 3. Railway автоматически перезапустит деплой

После деплоя:
- База данных будет автоматически заполнена автомобилями
- Медиа-файлы будут обслуживаться правильно

### 4. Загрузите фотографии:

После деплоя войдите в админ-панель:
1. Откройте `https://up11-production.up.railway.app/admin/`
2. Войдите (admin / admin123)
3. Для каждого автомобиля загрузите фото:
   - Откройте "Автомобили" → выберите автомобиль
   - Загрузите фото в поле "Фото автомобиля"
   - Сохраните

## Альтернатива: Использовать существующие фото

Если у вас есть фото в папке `shop_project/media/cars/`, они должны автоматически отображаться после деплоя.

## Проверка после деплоя:

1. Откройте `https://up11-production.up.railway.app/cars/`
2. Должны отображаться 9 автомобилей
3. Фотографии должны загружаться (если загружены в админ-панели)

## Если фотографии все еще не отображаются:

1. Проверьте, что медиа-файлы скопированы в контейнер
2. Проверьте права доступа к файлам
3. Используйте внешнее хранилище (S3, Cloudinary) для production

