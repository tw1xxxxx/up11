# Как подключить базу данных к сервису up11 в Railway

## Шаг 1: Проверка наличия базы данных

✅ **База данных уже добавлена!** 
- В левом сайдбаре видна карточка "Postgres"
- Это означает, что PostgreSQL база данных создана

## Шаг 2: Проверка подключения к сервису up11

1. **Откройте сервис up11:**
   - В левом сайдбаре нажмите на "up11"
   - Или в правой части экрана откроется информация о сервисе

2. **Перейдите во вкладку "Variables":**
   - В верхней части информации о сервисе есть вкладки: "Deployments", "Variables", "Metrics", "Settings"
   - Нажмите на вкладку **"Variables"**

3. **Проверьте наличие DATABASE_URL:**
   - В списке переменных должна быть переменная `DATABASE_URL`
   - Она должна быть добавлена автоматически Railway
   - Значение выглядит примерно так: `postgresql://postgres:password@hostname:5432/railway`

## Шаг 3: Если DATABASE_URL отсутствует

Если переменной `DATABASE_URL` нет в Variables сервиса up11:

### Способ 1: Автоматическое подключение

1. **Вернитесь в Architecture view:**
   - Нажмите на вкладку "Architecture" вверху

2. **Подключите базу к сервису:**
   - Наведите курсор на карточку "Postgres"
   - Должна появиться возможность подключить её к сервису
   - Или нажмите на карточку "Postgres" и найдите опцию "Connect to service"

### Способ 2: Ручное добавление переменной

1. **Откройте базу данных Postgres:**
   - В левом сайдбаре нажмите на "Postgres"

2. **Скопируйте DATABASE_URL:**
   - В настройках базы данных найдите "Connection String" или "DATABASE_URL"
   - Скопируйте значение

3. **Добавьте в сервис up11:**
   - Откройте сервис "up11"
   - Перейдите в "Variables"
   - Нажмите "New Variable"
   - Name: `DATABASE_URL`
   - Value: вставьте скопированное значение
   - Нажмите "Save"

## Шаг 4: Выполнение миграций

После проверки подключения выполните миграции:

1. **Откройте сервис up11**
2. **Нажмите на три точки (⋮)** в правом верхнем углу активного деплоя
3. **Выберите "Open Shell"** или "Shell"
4. **Выполните команды:**
   ```bash
   python manage.py migrate
   python manage.py collectstatic --noinput
   python manage.py createsuperuser
   ```

## Шаг 5: Проверка работы

1. **Проверьте логи:**
   - Во вкладке "Deployments" откройте последний деплой
   - Нажмите "View logs"
   - Убедитесь, что нет ошибок подключения к БД

2. **Проверьте работу сайта:**
   - Railway должен предоставить URL вашего приложения
   - Откройте его в браузере
   - Попробуйте зарегистрироваться или войти
   - Если всё работает - база данных подключена правильно!

## Визуальные подсказки:

- **База данных:** Карточка "Postgres" в левом сайдбаре
- **Сервис:** Карточка "up11" в левом сайдбаре
- **Variables:** Вкладка в информации о сервисе
- **Shell:** Три точки (⋮) → "Open Shell"

## Если база данных не подключена автоматически:

Railway обычно автоматически подключает базу данных к сервисам в том же проекте. Если этого не произошло:

1. Убедитесь, что база данных и сервис в одном проекте
2. Проверьте, что вы находитесь в правильном окружении (production)
3. Попробуйте перезапустить сервис после добавления переменной

